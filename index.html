<!DOCTYPE html>
<html>
<head>
    <title>Password Entry</title>
    <style>
        /* Set the background color of the body to black */
        body {
            background-color: black;
        }
        
        /* Create a container to center the password box */
        .container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        
        /* Style the password box */
        .password-box {
            background-color: #000; /* Set the background color of the password box to black */
            color: lime; /* Set the text color to lime */
            font-family: monospace; /* Use a monospace font */
            padding: 20px; /* Add padding around the password box */
            text-align: center; /* Center the content horizontally */
            display: flex; /* Use flexbox to center the input vertically */
            align-items: center;
            flex-direction: column; /* Align child elements vertically */
            max-width: 500px; /* Set a maximum width for the password box */
            width: 80%; /* Set a moderate width for the password box */
        }
        
        /* Style the password input field */
        .password-input {
            background-color: black; /* Set the background color of the input field to black */
            color: lime; /* Set the text color to lime */
            border: none; /* Remove the border */
            padding: 5px; /* Add padding to the input field */
            width: 270px; /* Set a fixed width for the input field */
            font-family: monospace; /* Use a monospace font */
            caret-color: lime; /* Set the caret color to lime */
            outline: none; /* Remove the focus outline */
            font-size: 2rem;
        }
        
        /* Style the input container */
        .input-container {
            display: flex; /* Use flexbox to align the input container */
            align-items: center; /* Center the items vertically */
            padding: 2px; /* Add padding to the input container */
        }
        
        /* Style the input label */
        .input-label {
            margin-right: 10px; /* Add right margin to the input label */
            font-size: 2.5rem;
        }
        
        /* Style the brackets */
        .brackets {
            color: lime; /* Set the text color to lime */
            font-size: 2rem;
        }
        
        /* Style the "Access Failed" page */
        .access-failed {
            display: none; /* Hide the element by default */
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgb(0, 0, 0);
            border: 2px solid red;
            color: rgb(255, 0, 0);
            padding: 20px;
            font-family: monospace;
            font-size: 2rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="password-box">
            <div class="input-label">Enter Password</div>
            <div class="input-container">
                <span class="brackets">[</span><input type="password" id="password-input" class="password-input"><span class="brackets">]</span>
            </div>
        </div>
    </div>

    <div class="access-failed" id="access-failed">
        Access Denied
    </div>

    <script>
        var passwordInput = document.getElementById('password-input');
        var passwordBox = document.querySelector('.password-box');
        var accessFailed = document.getElementById('access-failed');

        passwordInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                var enteredPassword = passwordInput.value;

                // Send enteredPassword to the server for validation
                fetch('validate-password.php', {
                    method: 'POST',
                    body: JSON.stringify({ password: enteredPassword }),
                    headers: {
                        'Content-Type': 'application/json'
                    }
                })
                .then(function(response) {
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error('Network response was not ok.');
                    }
                })
                .then(function(data) {
                    if (data.accessGranted) {
                        window.location.href = "Enter";
                    } else {
                        passwordInput.value = '';
                        passwordBox.style.display = 'none'; // Hide the password box
                        accessFailed.style.display = 'block'; // Show the "Access Failed" message
                        setTimeout(function() {
                            passwordBox.style.display = 'flex'; // Show the password box again
                            accessFailed.style.display = 'none'; // Hide the "Access Failed" message after 1 second
                            passwordInput.focus(); // Set focus on the password input field
                        }, 1000);
                    }
                })
                .catch(function(error) {
                    console.log('Error:', error);
                });
            }
        });
    </script>
</body>
</html>
